Run by AMM on 14 Sep 2016 17:58:31





================================================================================
 1 create virulence prediction panels
================================================================================
drop sites with no virulence test

       site |      Freq.     Percent        Cum.
------------+-----------------------------------
        eta |      4,137        5.00        5.00
        etb |      4,137        5.00       10.00
        etd |      4,137        5.00       15.00
     lukpvf |      4,137        5.00       20.00
     lukpvs |      4,137        5.00       25.00
       meca |      4,137        5.00       30.00
       mecc |      4,137        5.00       35.00
        sea |      4,137        5.00       40.00
        seb |      4,137        5.00       45.00
        sec |      4,137        5.00       50.00
        sed |      4,137        5.00       55.00
        see |      4,137        5.00       60.00
        seg |      4,137        5.00       65.00
        seh |      4,137        5.00       70.00
        sei |      4,137        5.00       75.00
        sej |      4,137        5.00       80.00
       selr |      4,137        5.00       85.00
        sep |      4,137        5.00       90.00
        seu |      4,137        5.00       95.00
      tsst1 |      4,137        5.00      100.00
------------+-----------------------------------
      Total |     82,740      100.00
eta

        eta |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        130        3.14        3.14
          s |      4,007       96.86      100.00
------------+-----------------------------------
      Total |      4,137      100.00
etb

        etb |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |         25        0.60        0.60
          s |      4,112       99.40      100.00
------------+-----------------------------------
      Total |      4,137      100.00
etd

        etd |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        181        4.38        4.38
          s |      3,956       95.62      100.00
------------+-----------------------------------
      Total |      4,137      100.00
meca

       meca |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |      1,144       27.65       27.65
          s |      2,993       72.35      100.00
------------+-----------------------------------
      Total |      4,137      100.00
mecc

       mecc |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |         51        1.23        1.23
          s |      4,086       98.77      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sea

        sea |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        940       22.72       22.72
          s |      3,197       77.28      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seb

        seb |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        345        8.34        8.34
          s |      3,792       91.66      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sec

        sec |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        711       17.19       17.19
          s |      3,426       82.81      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sed

        sed |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        224        5.41        5.41
          s |      3,913       94.59      100.00
------------+-----------------------------------
      Total |      4,137      100.00
see

        see |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |         17        0.41        0.41
          s |      4,120       99.59      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seg

        seg |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |      2,357       56.97       56.97
          s |      1,780       43.03      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seh

        seh |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        442       10.68       10.68
          s |      3,695       89.32      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sei

        sei |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |      2,343       56.64       56.64
          s |      1,794       43.36      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sej

        sej |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        235        5.68        5.68
          s |      3,902       94.32      100.00
------------+-----------------------------------
      Total |      4,137      100.00
selr

       selr |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        228        5.51        5.51
          s |      3,909       94.49      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sep

        sep |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        362        8.75        8.75
          s |      3,775       91.25      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seu

        seu |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |      2,319       56.06       56.06
          s |      1,818       43.94      100.00
------------+-----------------------------------
      Total |      4,137      100.00
tsst1

      tsst1 |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        812       19.63       19.63
          s |      3,325       80.37      100.00
------------+-----------------------------------
      Total |      4,137      100.00
pvl

        pvl |      Freq.     Percent        Cum.
------------+-----------------------------------
          p |        340        8.22        8.22
          s |      3,797       91.78      100.00
------------+-----------------------------------
      Total |      4,137      100.00
save panal
basic virulence prediction counts

----------------------------------------------------------------------------------------------------------------------------------
-> method = genefinder

           |         value
      site |         p          s |     Total
-----------+----------------------+----------
       eta |        40      1,339 |     1,379 
       etb |         6      1,373 |     1,379 
       etd |        58      1,321 |     1,379 
      meca |       379      1,000 |     1,379 
      mecc |        17      1,362 |     1,379 
       pvl |       110      1,269 |     1,379 
       sea |       298      1,081 |     1,379 
       seb |       111      1,268 |     1,379 
       sec |       229      1,150 |     1,379 
       sed |        66      1,313 |     1,379 
       see |         4      1,375 |     1,379 
       seg |       773        606 |     1,379 
       seh |       136      1,243 |     1,379 
       sei |       774        605 |     1,379 
       sej |        69      1,310 |     1,379 
      selr |        67      1,312 |     1,379 
       sep |       110      1,269 |     1,379 
       seu |       782        597 |     1,379 
     tsst1 |       259      1,120 |     1,379 
-----------+----------------------+----------
     Total |     4,288     21,913 |    26,201 


----------------------------------------------------------------------------------------------------------------------------------
-> method = typewriter

           |         value
      site |         p          s |     Total
-----------+----------------------+----------
       eta |        40      1,339 |     1,379 
       etb |         5      1,374 |     1,379 
       etd |        57      1,322 |     1,379 
      meca |       377      1,002 |     1,379 
      mecc |        17      1,362 |     1,379 
       pvl |       109      1,270 |     1,379 
       sea |       295      1,084 |     1,379 
       seb |       109      1,270 |     1,379 
       sec |       225      1,154 |     1,379 
       sed |        66      1,313 |     1,379 
       see |         4      1,375 |     1,379 
       seg |       753        626 |     1,379 
       seh |       134      1,245 |     1,379 
       sei |       747        632 |     1,379 
       sej |        69      1,310 |     1,379 
      selr |        67      1,312 |     1,379 
       sep |       109      1,270 |     1,379 
       seu |       725        654 |     1,379 
     tsst1 |       255      1,124 |     1,379 
-----------+----------------------+----------
     Total |     4,163     22,038 |    26,201 


----------------------------------------------------------------------------------------------------------------------------------
-> method = zam

           |         value
      site |         p          s |     Total
-----------+----------------------+----------
       eta |        50      1,329 |     1,379 
       etb |        14      1,365 |     1,379 
       etd |        66      1,313 |     1,379 
      meca |       388        991 |     1,379 
      mecc |        17      1,362 |     1,379 
       pvl |       121      1,258 |     1,379 
       sea |       347      1,032 |     1,379 
       seb |       125      1,254 |     1,379 
       sec |       257      1,122 |     1,379 
       sed |        92      1,287 |     1,379 
       see |         9      1,370 |     1,379 
       seg |       831        548 |     1,379 
       seh |       172      1,207 |     1,379 
       sei |       822        557 |     1,379 
       sej |        97      1,282 |     1,379 
      selr |        94      1,285 |     1,379 
       sep |       143      1,236 |     1,379 
       seu |       812        567 |     1,379 
     tsst1 |       298      1,081 |     1,379 
-----------+----------------------+----------
     Total |     4,755     21,446 |    26,201 



----------------------------------------------------------------------------------------------------------------------------------
-> site = eta

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |        40      1,339 |     1,379 
typewriter |        40      1,339 |     1,379 
       zam |        50      1,329 |     1,379 
-----------+----------------------+----------
     Total |       130      4,007 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = etb

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |         6      1,373 |     1,379 
typewriter |         5      1,374 |     1,379 
       zam |        14      1,365 |     1,379 
-----------+----------------------+----------
     Total |        25      4,112 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = etd

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |        58      1,321 |     1,379 
typewriter |        57      1,322 |     1,379 
       zam |        66      1,313 |     1,379 
-----------+----------------------+----------
     Total |       181      3,956 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = meca

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       379      1,000 |     1,379 
typewriter |       377      1,002 |     1,379 
       zam |       388        991 |     1,379 
-----------+----------------------+----------
     Total |     1,144      2,993 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = mecc

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |        17      1,362 |     1,379 
typewriter |        17      1,362 |     1,379 
       zam |        17      1,362 |     1,379 
-----------+----------------------+----------
     Total |        51      4,086 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = pvl

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       110      1,269 |     1,379 
typewriter |       109      1,270 |     1,379 
       zam |       121      1,258 |     1,379 
-----------+----------------------+----------
     Total |       340      3,797 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sea

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       298      1,081 |     1,379 
typewriter |       295      1,084 |     1,379 
       zam |       347      1,032 |     1,379 
-----------+----------------------+----------
     Total |       940      3,197 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seb

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       111      1,268 |     1,379 
typewriter |       109      1,270 |     1,379 
       zam |       125      1,254 |     1,379 
-----------+----------------------+----------
     Total |       345      3,792 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sec

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       229      1,150 |     1,379 
typewriter |       225      1,154 |     1,379 
       zam |       257      1,122 |     1,379 
-----------+----------------------+----------
     Total |       711      3,426 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sed

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |        66      1,313 |     1,379 
typewriter |        66      1,313 |     1,379 
       zam |        92      1,287 |     1,379 
-----------+----------------------+----------
     Total |       224      3,913 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = see

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |         4      1,375 |     1,379 
typewriter |         4      1,375 |     1,379 
       zam |         9      1,370 |     1,379 
-----------+----------------------+----------
     Total |        17      4,120 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seg

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       773        606 |     1,379 
typewriter |       753        626 |     1,379 
       zam |       831        548 |     1,379 
-----------+----------------------+----------
     Total |     2,357      1,780 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seh

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       136      1,243 |     1,379 
typewriter |       134      1,245 |     1,379 
       zam |       172      1,207 |     1,379 
-----------+----------------------+----------
     Total |       442      3,695 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sei

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       774        605 |     1,379 
typewriter |       747        632 |     1,379 
       zam |       822        557 |     1,379 
-----------+----------------------+----------
     Total |     2,343      1,794 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sej

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |        69      1,310 |     1,379 
typewriter |        69      1,310 |     1,379 
       zam |        97      1,282 |     1,379 
-----------+----------------------+----------
     Total |       235      3,902 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = selr

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |        67      1,312 |     1,379 
typewriter |        67      1,312 |     1,379 
       zam |        94      1,285 |     1,379 
-----------+----------------------+----------
     Total |       228      3,909 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sep

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       110      1,269 |     1,379 
typewriter |       109      1,270 |     1,379 
       zam |       143      1,236 |     1,379 
-----------+----------------------+----------
     Total |       362      3,775 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seu

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       782        597 |     1,379 
typewriter |       725        654 |     1,379 
       zam |       812        567 |     1,379 
-----------+----------------------+----------
     Total |     2,319      1,818 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = tsst1

           |         value
    method |         p          s |     Total
-----------+----------------------+----------
genefinder |       259      1,120 |     1,379 
typewriter |       255      1,124 |     1,379 
       zam |       298      1,081 |     1,379 
-----------+----------------------+----------
     Total |       812      3,325 |     4,137 


counts differing between method: gene, type, mykrobe

   valueall |      Freq.     Percent        Cum.
------------+-----------------------------------
        sss |     21,446       81.85       81.85
        ppp |      4,156       15.86       97.71
        ssp |        460        1.76       99.47
        psp |        132        0.50       99.97
        spp |          7        0.03      100.00
------------+-----------------------------------
      Total |     26,201      100.00

           |                        valueall
      site |       ppp        psp        spp        ssp        sss |     Total
-----------+-------------------------------------------------------+----------
       eta |        40          0          0         10      1,329 |     1,379 
       etb |         5          1          0          8      1,365 |     1,379 
       etd |        57          1          0          8      1,313 |     1,379 
      meca |       377          2          0          9        991 |     1,379 
      mecc |        17          0          0          0      1,362 |     1,379 
       pvl |       109          1          0         11      1,258 |     1,379 
       sea |       295          3          0         49      1,032 |     1,379 
       seb |       109          2          0         14      1,254 |     1,379 
       sec |       225          4          0         28      1,122 |     1,379 
       sed |        66          0          0         26      1,287 |     1,379 
       see |         4          0          0          5      1,370 |     1,379 
       seg |       753         20          0         58        548 |     1,379 
       seh |       134          2          0         36      1,207 |     1,379 
       sei |       741         33          6         42        557 |     1,379 
       sej |        69          0          0         28      1,282 |     1,379 
      selr |        67          0          0         27      1,285 |     1,379 
       sep |       108          2          1         32      1,236 |     1,379 
       seu |       725         57          0         30        567 |     1,379 
     tsst1 |       255          4          0         39      1,081 |     1,379 
-----------+-------------------------------------------------------+----------
     Total |     4,156        132          7        460     21,446 |    26,201 






================================================================================
 1 add gold standard
================================================================================

    Result                           # of obs.
    -----------------------------------------
    not matched                             0

    matched                            26,201
        not updated                    26,201  (_merge==3)
        missing updated                     0  (_merge==4)
        nonmissing conflict                 0  (_merge==5)
    -----------------------------------------
predictive is gene, type, mykrobe

goldstanda |                        valueall
        rd |       ppp        psp        spp        ssp        sss |     Total
-----------+-------------------------------------------------------+----------
         - |     3,084         99          7        401     17,530 |    21,121 
         A |         1          1          0         18      1,084 |     1,104 
        NA |       452         22          0         39      2,820 |     3,333 
         P |       619         10          0          2         12 |       643 
-----------+-------------------------------------------------------+----------
     Total |     4,156        132          7        460     21,446 |    26,201 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = -

              |                        valueall
         site |       ppp        psp        spp        ssp        sss |     Total
--------------+-------------------------------------------------------+----------
          eta |        18          0          0          9      1,112 |     1,139 
          etb |         1          1          0          7      1,145 |     1,154 
          etd |        30          1          0          6      1,107 |     1,144 
         meca |       215          0          0          4        768 |       987 
         mecc |         0          0          0          0        987 |       987 
          pvl |        16          1          0          1        969 |       987 
          sea |       213          3          0         46        870 |     1,132 
          seb |        74          2          0         11      1,064 |     1,151 
          sec |       158          4          0         26        956 |     1,144 
          sed |        38          0          0         25      1,093 |     1,156 
          see |         0          0          0          5      1,164 |     1,169 
          seg |       604         20          0         54        417 |     1,095 
          seh |        79          1          0         35      1,031 |     1,146 
          sei |       605         21          6         36        428 |     1,096 
          sej |        38          0          0         27      1,087 |     1,152 
         selr |        55          0          0         26      1,091 |     1,172 
          sep |        89          2          1         29      1,051 |     1,172 
          seu |       647         40          0         26        438 |     1,151 
        tsst1 |       204          3          0         28        752 |       987 
--------------+-------------------------------------------------------+----------
        Total |     3,084         99          7        401     17,530 |    21,121 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = A

              |                  valueall
         site |       ppp        psp        ssp        sss |     Total
--------------+--------------------------------------------+----------
          eta |         0          0          0         36 |        36 
          etb |         0          0          0         36 |        36 
          etd |         0          0          0         36 |        36 
         meca |         1          0          4        172 |       177 
         mecc |         0          0          0        155 |       155 
          pvl |         0          0          8        231 |       239 
          sea |         0          0          0         20 |        20 
          seb |         0          0          0         20 |        20 
          sec |         0          0          0         20 |        20 
          sed |         0          0          0         20 |        20 
          see |         0          0          0         20 |        20 
          seg |         0          0          0         20 |        20 
          seh |         0          0          0         20 |        20 
          sei |         0          0          0         20 |        20 
          sej |         0          0          0         20 |        20 
         selr |         0          0          0         20 |        20 
          sep |         0          0          0         20 |        20 
          seu |         0          0          1         19 |        20 
        tsst1 |         0          1          5        179 |       185 
--------------+--------------------------------------------+----------
        Total |         1          1         18      1,084 |     1,104 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = NA

              |                  valueall
         site |       ppp        psp        ssp        sss |     Total
--------------+--------------------------------------------+----------
          eta |         4          0          1        181 |       186 
          etb |         1          0          1        184 |       186 
          etd |        14          0          2        170 |       186 
         meca |        11          1          1         51 |        64 
         mecc |         4          0          0        220 |       224 
          pvl |         2          0          1         55 |        58 
          sea |        45          0          3        139 |       187 
          seb |        14          0          3        170 |       187 
          sec |        40          0          2        145 |       187 
          sed |        12          0          1        174 |       187 
          see |         1          0          0        186 |       187 
          seg |        73          0          4        110 |       187 
          seh |        31          1          1        154 |       187 
          sei |        68          6          5        108 |       187 
          sej |        12          0          1        174 |       187 
         selr |        12          0          1        174 |       187 
          sep |        19          0          3        165 |       187 
          seu |        60         14          3        110 |       187 
        tsst1 |        29          0          6        150 |       185 
--------------+--------------------------------------------+----------
        Total |       452         22         39      2,820 |     3,333 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = P

              |                  valueall
         site |       ppp        psp        ssp        sss |     Total
--------------+--------------------------------------------+----------
          eta |        18          0          0          0 |        18 
          etb |         3          0          0          0 |         3 
          etd |        13          0          0          0 |        13 
         meca |       150          1          0          0 |       151 
         mecc |        13          0          0          0 |        13 
          pvl |        91          0          1          3 |        95 
          sea |        37          0          0          3 |        40 
          seb |        21          0          0          0 |        21 
          sec |        27          0          0          1 |        28 
          sed |        16          0          0          0 |        16 
          see |         3          0          0          0 |         3 
          seg |        76          0          0          1 |        77 
          seh |        24          0          0          2 |        26 
          sei |        68          6          1          1 |        76 
          sej |        19          0          0          1 |        20 
          seu |        18          3          0          0 |        21 
        tsst1 |        22          0          0          0 |        22 
--------------+--------------------------------------------+----------
        Total |       619         10          2         12 |       643 


. 
. * create prediction panals

. * clean data

. 
. cd E:\users\amy.mason\Pipeline_27_07_2016\
E:\users\amy.mason\Pipeline_27_07_2016

. 
. run clean_pheno.do
