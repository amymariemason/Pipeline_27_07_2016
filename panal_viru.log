Run by AMM on  2 Jan 2018 16:43:49





================================================================================
 1 create virulence prediction panels
================================================================================
drop sites with no virulence test

       site |      Freq.     Percent        Cum.
------------+-----------------------------------
        eta |      4,137        5.00        5.00
        etb |      4,137        5.00       10.00
        etd |      4,137        5.00       15.00
     lukpvf |      4,137        5.00       20.00
     lukpvs |      4,137        5.00       25.00
       meca |      4,137        5.00       30.00
       mecc |      4,137        5.00       35.00
        sea |      4,137        5.00       40.00
        seb |      4,137        5.00       45.00
        sec |      4,137        5.00       50.00
        sed |      4,137        5.00       55.00
        see |      4,137        5.00       60.00
        seg |      4,137        5.00       65.00
        seh |      4,137        5.00       70.00
        sei |      4,137        5.00       75.00
        sej |      4,137        5.00       80.00
       selr |      4,137        5.00       85.00
        sep |      4,137        5.00       90.00
        seu |      4,137        5.00       95.00
      tsst1 |      4,137        5.00      100.00
------------+-----------------------------------
      Total |     82,740      100.00
eta

        eta |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      4,016       97.08       97.08
          p |        121        2.92      100.00
------------+-----------------------------------
      Total |      4,137      100.00
etb

        etb |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      4,119       99.56       99.56
          p |         18        0.44      100.00
------------+-----------------------------------
      Total |      4,137      100.00
etd

        etd |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,963       95.79       95.79
          p |        174        4.21      100.00
------------+-----------------------------------
      Total |      4,137      100.00
meca

       meca |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,001       72.54       72.54
          p |      1,136       27.46      100.00
------------+-----------------------------------
      Total |      4,137      100.00
mecc

       mecc |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      4,086       98.77       98.77
          p |         51        1.23      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sea

        sea |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,245       78.44       78.44
          p |        892       21.56      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seb

        seb |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,805       91.97       91.97
          p |        332        8.03      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sec

        sec |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,453       83.47       83.47
          p |        684       16.53      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sed

        sed |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,939       95.21       95.21
          p |        198        4.79      100.00
------------+-----------------------------------
      Total |      4,137      100.00
see

        see |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      4,125       99.71       99.71
          p |         12        0.29      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seg

        seg |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      1,832       44.28       44.28
          p |      2,305       55.72      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seh

        seh |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,729       90.14       90.14
          p |        408        9.86      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sei

        sei |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      1,833       44.31       44.31
          p |      2,304       55.69      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sej

        sej |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,930       95.00       95.00
          p |        207        5.00      100.00
------------+-----------------------------------
      Total |      4,137      100.00
selr

       selr |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,936       95.14       95.14
          p |        201        4.86      100.00
------------+-----------------------------------
      Total |      4,137      100.00
sep

        sep |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,807       92.02       92.02
          p |        330        7.98      100.00
------------+-----------------------------------
      Total |      4,137      100.00
seu

        seu |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      1,846       44.62       44.62
          p |      2,291       55.38      100.00
------------+-----------------------------------
      Total |      4,137      100.00
tsst1

      tsst1 |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,363       81.29       81.29
          p |        774       18.71      100.00
------------+-----------------------------------
      Total |      4,137      100.00
pvl

        pvl |      Freq.     Percent        Cum.
------------+-----------------------------------
          a |      3,805       91.97       91.97
          p |        332        8.03      100.00
------------+-----------------------------------
      Total |      4,137      100.00
save panal
basic virulence prediction counts

----------------------------------------------------------------------------------------------------------------------------------
-> method = genefinder

           |         value
      site |         a          p |     Total
-----------+----------------------+----------
       eta |     1,339         40 |     1,379 
       etb |     1,373          6 |     1,379 
       etd |     1,321         58 |     1,379 
      meca |     1,000        379 |     1,379 
      mecc |     1,362         17 |     1,379 
       pvl |     1,269        110 |     1,379 
       sea |     1,081        298 |     1,379 
       seb |     1,268        111 |     1,379 
       sec |     1,150        229 |     1,379 
       sed |     1,313         66 |     1,379 
       see |     1,375          4 |     1,379 
       seg |       606        773 |     1,379 
       seh |     1,243        136 |     1,379 
       sei |       605        774 |     1,379 
       sej |     1,310         69 |     1,379 
      selr |     1,312         67 |     1,379 
       sep |     1,269        110 |     1,379 
       seu |       597        782 |     1,379 
     tsst1 |     1,120        259 |     1,379 
-----------+----------------------+----------
     Total |    21,913      4,288 |    26,201 


----------------------------------------------------------------------------------------------------------------------------------
-> method = typewriter

           |         value
      site |         a          p |     Total
-----------+----------------------+----------
       eta |     1,339         40 |     1,379 
       etb |     1,374          5 |     1,379 
       etd |     1,322         57 |     1,379 
      meca |     1,002        377 |     1,379 
      mecc |     1,362         17 |     1,379 
       pvl |     1,270        109 |     1,379 
       sea |     1,084        295 |     1,379 
       seb |     1,270        109 |     1,379 
       sec |     1,154        225 |     1,379 
       sed |     1,313         66 |     1,379 
       see |     1,375          4 |     1,379 
       seg |       626        753 |     1,379 
       seh |     1,245        134 |     1,379 
       sei |       632        747 |     1,379 
       sej |     1,310         69 |     1,379 
      selr |     1,312         67 |     1,379 
       sep |     1,270        109 |     1,379 
       seu |       654        725 |     1,379 
     tsst1 |     1,124        255 |     1,379 
-----------+----------------------+----------
     Total |    22,038      4,163 |    26,201 


----------------------------------------------------------------------------------------------------------------------------------
-> method = zam

           |         value
      site |         a          p |     Total
-----------+----------------------+----------
       eta |     1,338         41 |     1,379 
       etb |     1,372          7 |     1,379 
       etd |     1,320         59 |     1,379 
      meca |       999        380 |     1,379 
      mecc |     1,362         17 |     1,379 
       pvl |     1,266        113 |     1,379 
       sea |     1,080        299 |     1,379 
       seb |     1,267        112 |     1,379 
       sec |     1,149        230 |     1,379 
       sed |     1,313         66 |     1,379 
       see |     1,375          4 |     1,379 
       seg |       600        779 |     1,379 
       seh |     1,241        138 |     1,379 
       sei |       596        783 |     1,379 
       sej |     1,310         69 |     1,379 
      selr |     1,312         67 |     1,379 
       sep |     1,268        111 |     1,379 
       seu |       595        784 |     1,379 
     tsst1 |     1,119        260 |     1,379 
-----------+----------------------+----------
     Total |    21,882      4,319 |    26,201 



----------------------------------------------------------------------------------------------------------------------------------
-> site = eta

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,339         40 |     1,379 
typewriter |     1,339         40 |     1,379 
       zam |     1,338         41 |     1,379 
-----------+----------------------+----------
     Total |     4,016        121 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = etb

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,373          6 |     1,379 
typewriter |     1,374          5 |     1,379 
       zam |     1,372          7 |     1,379 
-----------+----------------------+----------
     Total |     4,119         18 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = etd

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,321         58 |     1,379 
typewriter |     1,322         57 |     1,379 
       zam |     1,320         59 |     1,379 
-----------+----------------------+----------
     Total |     3,963        174 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = meca

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,000        379 |     1,379 
typewriter |     1,002        377 |     1,379 
       zam |       999        380 |     1,379 
-----------+----------------------+----------
     Total |     3,001      1,136 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = mecc

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,362         17 |     1,379 
typewriter |     1,362         17 |     1,379 
       zam |     1,362         17 |     1,379 
-----------+----------------------+----------
     Total |     4,086         51 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = pvl

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,269        110 |     1,379 
typewriter |     1,270        109 |     1,379 
       zam |     1,266        113 |     1,379 
-----------+----------------------+----------
     Total |     3,805        332 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sea

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,081        298 |     1,379 
typewriter |     1,084        295 |     1,379 
       zam |     1,080        299 |     1,379 
-----------+----------------------+----------
     Total |     3,245        892 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seb

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,268        111 |     1,379 
typewriter |     1,270        109 |     1,379 
       zam |     1,267        112 |     1,379 
-----------+----------------------+----------
     Total |     3,805        332 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sec

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,150        229 |     1,379 
typewriter |     1,154        225 |     1,379 
       zam |     1,149        230 |     1,379 
-----------+----------------------+----------
     Total |     3,453        684 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sed

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,313         66 |     1,379 
typewriter |     1,313         66 |     1,379 
       zam |     1,313         66 |     1,379 
-----------+----------------------+----------
     Total |     3,939        198 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = see

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,375          4 |     1,379 
typewriter |     1,375          4 |     1,379 
       zam |     1,375          4 |     1,379 
-----------+----------------------+----------
     Total |     4,125         12 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seg

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |       606        773 |     1,379 
typewriter |       626        753 |     1,379 
       zam |       600        779 |     1,379 
-----------+----------------------+----------
     Total |     1,832      2,305 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seh

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,243        136 |     1,379 
typewriter |     1,245        134 |     1,379 
       zam |     1,241        138 |     1,379 
-----------+----------------------+----------
     Total |     3,729        408 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sei

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |       605        774 |     1,379 
typewriter |       632        747 |     1,379 
       zam |       596        783 |     1,379 
-----------+----------------------+----------
     Total |     1,833      2,304 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sej

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,310         69 |     1,379 
typewriter |     1,310         69 |     1,379 
       zam |     1,310         69 |     1,379 
-----------+----------------------+----------
     Total |     3,930        207 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = selr

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,312         67 |     1,379 
typewriter |     1,312         67 |     1,379 
       zam |     1,312         67 |     1,379 
-----------+----------------------+----------
     Total |     3,936        201 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = sep

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,269        110 |     1,379 
typewriter |     1,270        109 |     1,379 
       zam |     1,268        111 |     1,379 
-----------+----------------------+----------
     Total |     3,807        330 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = seu

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |       597        782 |     1,379 
typewriter |       654        725 |     1,379 
       zam |       595        784 |     1,379 
-----------+----------------------+----------
     Total |     1,846      2,291 |     4,137 


----------------------------------------------------------------------------------------------------------------------------------
-> site = tsst1

           |         value
    method |         a          p |     Total
-----------+----------------------+----------
genefinder |     1,120        259 |     1,379 
typewriter |     1,124        255 |     1,379 
       zam |     1,119        260 |     1,379 
-----------+----------------------+----------
     Total |     3,363        774 |     4,137 


counts differing between method: gene, type, mykrobe

   valueall |      Freq.     Percent        Cum.
------------+-----------------------------------
        aaa |     21,882       83.52       83.52
        ppp |      4,156       15.86       99.38
        ppa |        132        0.50       99.88
        apa |         24        0.09       99.97
        app |          7        0.03      100.00
------------+-----------------------------------
      Total |     26,201      100.00

           |                        valueall
      site |       aaa        apa        app        ppa        ppp |     Total
-----------+-------------------------------------------------------+----------
       eta |     1,338          1          0          0         40 |     1,379 
       etb |     1,372          1          0          1          5 |     1,379 
       etd |     1,320          1          0          1         57 |     1,379 
      meca |       999          1          0          2        377 |     1,379 
      mecc |     1,362          0          0          0         17 |     1,379 
       pvl |     1,266          3          0          1        109 |     1,379 
       sea |     1,080          1          0          3        295 |     1,379 
       seb |     1,267          1          0          2        109 |     1,379 
       sec |     1,149          1          0          4        225 |     1,379 
       sed |     1,313          0          0          0         66 |     1,379 
       see |     1,375          0          0          0          4 |     1,379 
       seg |       600          6          0         20        753 |     1,379 
       seh |     1,241          2          0          2        134 |     1,379 
       sei |       596          3          6         33        741 |     1,379 
       sej |     1,310          0          0          0         69 |     1,379 
      selr |     1,312          0          0          0         67 |     1,379 
       sep |     1,268          0          1          2        108 |     1,379 
       seu |       595          2          0         57        725 |     1,379 
     tsst1 |     1,119          1          0          4        255 |     1,379 
-----------+-------------------------------------------------------+----------
     Total |    21,882         24          7        132      4,156 |    26,201 






================================================================================
 1 add gold standard
================================================================================

    Result                           # of obs.
    -----------------------------------------
    not matched                             0

    matched                            26,201
        not updated                    26,201  (_merge==3)
        missing updated                     0  (_merge==4)
        nonmissing conflict                 0  (_merge==5)
    -----------------------------------------
predictive is gene,  mykrobe, type,

goldstanda |                        valueall
        rd |       aaa        apa        app        ppa        ppp |     Total
-----------+-------------------------------------------------------+----------
         A |     3,362         10          0         17         82 |     3,471 
        NA |    18,506         12          7        105      3,456 |    22,086 
         P |        14          2          0         10        618 |       644 
-----------+-------------------------------------------------------+----------
     Total |    21,882         24          7        132      4,156 |    26,201 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = A

              |                  valueall
         site |       aaa        apa        ppa        ppp |     Total
--------------+--------------------------------------------+----------
          eta |       187          1          0          0 |       188 
          etb |       202          0          1          0 |       203 
          etd |       192          1          0          0 |       193 
         meca |       175          1          0          1 |       177 
         mecc |       155          0          0          0 |       155 
          pvl |       237          2          0          0 |       239 
          sea |       163          0          1          1 |       165 
          seb |       183          1          0          1 |       185 
          sec |       174          1          1          1 |       177 
          sed |       189          0          0          0 |       189 
          see |       202          0          0          0 |       202 
          seg |       126          1          1          0 |       128 
          seh |       177          1          0          1 |       179 
          sei |       126          0          1          0 |       127 
          sej |       185          0          0          0 |       185 
         selr |       186          0          0         19 |       205 
          sep |       194          0          0         11 |       205 
          seu |       126          0         11         47 |       184 
        tsst1 |       183          1          1          0 |       185 
--------------+--------------------------------------------+----------
        Total |     3,362         10         17         82 |     3,471 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = NA

              |                        valueall
         site |       aaa        apa        app        ppa        ppp |     Total
--------------+-------------------------------------------------------+----------
          eta |     1,151          0          0          0         22 |     1,173 
          etb |     1,170          1          0          0          2 |     1,173 
          etd |     1,128          0          0          1         44 |     1,173 
         meca |       824          0          0          1        226 |     1,051 
         mecc |     1,207          0          0          0          4 |     1,211 
          pvl |     1,026          0          0          1         18 |     1,045 
          sea |       914          1          0          2        257 |     1,174 
          seb |     1,084          0          0          2         88 |     1,174 
          sec |       974          0          0          3        197 |     1,174 
          sed |     1,124          0          0          0         50 |     1,174 
          see |     1,173          0          0          0          1 |     1,174 
          seg |       473          5          0         19        677 |     1,174 
          seh |     1,062          1          0          2        109 |     1,174 
          sei |       467          2          6         26        673 |     1,174 
          sej |     1,124          0          0          0         50 |     1,174 
         selr |     1,126          0          0          0         48 |     1,174 
          sep |     1,074          0          1          2         97 |     1,174 
          seu |       469          2          0         43        660 |     1,174 
        tsst1 |       936          0          0          3        233 |     1,172 
--------------+-------------------------------------------------------+----------
        Total |    18,506         12          7        105      3,456 |    22,086 


----------------------------------------------------------------------------------------------------------------------------------
-> goldstandard = P

              |                  valueall
         site |       aaa        apa        ppa        ppp |     Total
--------------+--------------------------------------------+----------
          eta |         0          0          0         18 |        18 
          etb |         0          0          0          3 |         3 
          etd |         0          0          0         13 |        13 
         meca |         0          0          1        150 |       151 
         mecc |         0          0          0         13 |        13 
          pvl |         3          1          0         91 |        95 
          sea |         3          0          0         37 |        40 
          seb |         0          0          0         20 |        20 
          sec |         1          0          0         27 |        28 
          sed |         0          0          0         16 |        16 
          see |         0          0          0          3 |         3 
          seg |         1          0          0         76 |        77 
          seh |         2          0          0         24 |        26 
          sei |         3          1          6         68 |        78 
          sej |         1          0          0         19 |        20 
          seu |         0          0          3         18 |        21 
        tsst1 |         0          0          0         22 |        22 
--------------+--------------------------------------------+----------
        Total |        14          2         10        618 |       644 


. * analyse data

. 
. cd "\\me-filer1\home$\am2609\My Documents\MMM work\Programs\Pipeline\"
\\me-filer1\home$\am2609\My Documents\MMM work\Programs\Pipeline

. 
. *compares A/P site predictions; makes agreement graph 1

. 
. run Analysis_Pipeline.do
